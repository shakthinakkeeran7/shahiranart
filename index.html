<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Form</title>
    <script src="https://raw.githubusercontent.com/shakthinakkeeran7/shahiranart/master/form.js"></script>
     <link rel="stylesheet" href="https://raw.githubusercontent.com/shakthinakkeeran7/shahiranart/master/style.css">

</head>
  <body>

    <style>

/* Reset styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* Body styles */
body {
  font-family: Arial, sans-serif;
  background-color: #f8f8f8;
  color: #333;
  line-height: 1.6;
}

/* Header styles */
header {
  background-color: #007bff;
  color: #fff;
  padding: 20px;
  text-align: center;
}

header h1 {
  font-size: 2.5rem;
  margin-bottom: 10px;
}

/* Main content styles */
main {
  padding: 20px;
}

/* Form styles */
form {
  max-width: 500px;
  margin: 0 auto;
  background-color: #fff;
  padding: 20px;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

form label {
  font-weight: bold;
}

form select,
form input[type="file"],
form input[type="text"],
form input[type="email"],
form textarea {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

form button {
  background-color: #007bff;
  color: #fff;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
  border-radius: 4px;
}

form button:hover {
  background-color: #0056b3;
}

/* Footer styles */
footer {
  background-color: #333;
  color: #fff;
  padding: 20px;
  text-align: center;
}
form select {
  font-size: 1.2rem; /* Medium font size */
}



    </style>
    <h1 id="headline">Normal Pencil Portrait Drawing & Sketch</h1>
    <div id="price">Price: $1499.00</div>

    <form
      id="product-form"
      action="javascript:void(0);"
      onsubmit="sendWhatsAppMessage()"
    >
      <div class="product-options">
        <div class="product-option">
          <label for="character-faces">Number Of Character/Faces:</label>
          <select id="character-faces" name="number_of_faces">
            <option value="1" selected>1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
          </select>
        </div>
        <div class="product-option">
          <label for="portrait-size">Choose Size:</label>
          <select id="portrait-size" name="portrait_size">
            <option value="8x6 Inches">8x6 Inches</option>
            <option value="12x10 Inches">12x10 Inches</option>
            <option value="16x12 Inches"  selected='selected'>16x12 Inches</option>
            <option value="24x16 Inches">24x16 Inches</option>
          </select>
        </div>
        <div class="product-option">
            <label for="drawing-type">Drawing Type:</label>
            <select id="drawing-type" name="drawing_type">
              <option value="Sketch"  selected='selected'>Sketch</option>
              <option value="Premium">Premium</option>
            </select>
          </div>

        <div class="product-option">
          <label for="framing-options">Framing Options:</label>
          <select id="framing-options" name="framing_options">
            <option value="Framed">Framed</option>
            <option value="Framed + Video">Framed + Video</option>
            <option value="Rolled Paper">Rolled Paper</option>
            <option value="Rolled Paper + Video">Rolled Paper + Video</option>
          </select>
        </div>
        <div class="product-option">
          <label for="frame-color">Choose Frame Color:</label>
          <select id="frame-color" name="frame_color">
            <option value="Black"  selected='selected'>Black</option>
            <option value="White">White</option>
          </select>
        </div>
        <div class="product-option">
          <label for="image-upload">Choose Image:</label>
          <input type="file" id="image-upload" name="image" />
        </div>
      </div>
      <button type="submit">Submit</button>
    </form>
    <script>

function updatePrice(parsedData) {
  var selectedCharacters = parseInt(
    document.getElementById("character-faces").value
  );
  var selectedSize = document.getElementById("portrait-size").value;
  var selectedFraming = document.getElementById("framing-options").value;
  var selectedDrawingType = document.getElementById("drawing-type").value; // Get selected drawing type

  var jsonUrl;
  if (selectedDrawingType === "Sketch") {
    jsonUrl = "https://raw.githubusercontent.com/shakthinakkeeran7/shahiranart/master/form.json";
  } else if (selectedDrawingType === "Premium") {
    jsonUrl = "https://raw.githubusercontent.com/shakthinakkeeran7/shahiranart/master/premium.json";
  }

  // Fetch JSON data based on the selected drawing type
  fetch(jsonUrl)
    .then((response) => {
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }
      return response.json();
    })
    .then((parsedData) => {
      // Use the parsed JSON data here
      console.log(parsedData);

      // Rest of the function remains the same...
      var matchingOffer = parsedData.offers.find(function(offer) {
        return (
          offer.name.includes(selectedCharacters + " / " + selectedSize) &&
          offer.name.includes(selectedFraming)
        );
      });

      // If no matching offer is found, find the next available offer for the selected Number Of Character/Faces
      if (!matchingOffer) {
        var index = parsedData.offers.findIndex(function(offer) {
          return offer.name.startsWith(selectedCharacters + " / ");
        });
        var nextOffer = parsedData.offers[index + 1];

        // If a next offer is found, update the selected Choose Size and update price accordingly
        if (nextOffer) {
          var newSize = nextOffer.name.split(" / ")[1].trim();
          document.getElementById("portrait-size").value = newSize;
          updatePrice(parsedData); // Recursively call updatePrice to ensure price is updated for the new size
          return;
        }

        // If no next offer is found, set price to $0.00 and exit
        document.getElementById("price").textContent = "Price: $0.00";
        return;
      }

      // Get the price from the matching offer
      var price = matchingOffer.price.toFixed(2) + " " + matchingOffer.priceCurrency;

      // Update the price display
      document.getElementById("price").textContent = "Price: " + price;
    })
    .catch((error) => {
      console.error("There was a problem fetching the JSON file:", error);
    });
}

// Attach event listener to the fetch call to perform actions once JSON data is fetched
fetch(
  "https://raw.githubusercontent.com/shakthinakkeeran7/shahiranart/master/form.json"
)
  .then((response) => {
    if (!response.ok) {
      throw new Error("Network response was not ok");
    }
    return response.json();
  })
  .then((parsedData) => {
    // Use the parsed JSON data here
    console.log(parsedData);

    // Call functions to set default dropdown values and update price based on selected options
    setDefaultDropdownValues(parsedData);

    // Attach event listeners to all dropdowns
    var dropdowns = document.querySelectorAll("select");
    dropdowns.forEach(function (dropdown) {
      dropdown.addEventListener("change", function () {
        updatePrice(parsedData);
      });
    });
  })
  .catch((error) => {
    console.error("There was a problem fetching the JSON file:", error);
  });

// Function to set default dropdown values based on JSON data
function setDefaultDropdownValues(parsedData) {
  var defaultOffer = parsedData.offers[0]; // Assuming the first offer in the JSON data is the default one

  // Extract default values from the default offer name
  var defaultCharacters = parseInt(
    defaultOffer.name.split(" / ")[0].trim()
  );
  var defaultSize = defaultOffer.name.split(" / ")[1].trim();
  var defaultFraming = defaultOffer.name.split(" / ")[2].trim();

  // Set default values for dropdowns
  document.getElementById("character-faces").value = defaultCharacters;
  document.getElementById("portrait-size").value = defaultSize;
  document.getElementById("framing-options").value = defaultFraming;

  // Update the price based on default values
  updatePrice(parsedData);
}

// Function to send WhatsApp message
function sendWhatsAppMessage() {
  var selectedSize = document.getElementById("portrait-size").value;
  var selectedFraming = document.getElementById("framing-options").value;
  var selectedCharacters =
    document.getElementById("character-faces").value;
  var message =
    "I would like to order " +
    selectedCharacters +
    " characters, size: " +
    selectedSize +
    ", framing option: " +
    selectedFraming +
    ". Please contact me.";

  // Redirect to WhatsApp with pre-filled message
  window.open(
    "https://wa.me/917418380095?text=" + encodeURIComponent(message),
    "_blank"
  );
}



      </script>
      
  </body>
</html>
